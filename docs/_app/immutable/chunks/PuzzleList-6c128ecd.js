import{S as v,i as V,s as I,L as S,e as F,b as y,M as j,K as d,h as u,I as q,k,q as h,l as g,m as p,r as m,E as _,u as O,P as C,a as G,c as M,n as E}from"./index-69c26055.js";import{m as N,i as K}from"./stores-b54e08c4.js";function z(i,t,n){const e=i.slice();return e[10]=t[n],e}function T(i){return{c:d,l:d,m:d,p:d,d}}function U(i){let t;function n(a,r){return a[3].length>0?D:B}let e=n(i),l=e(i);return{c(){l.c(),t=F()},l(a){l.l(a),t=F()},m(a,r){l.m(a,r),y(a,t,r)},p(a,r){e===(e=n(a))&&l?l.p(a,r):(l.d(1),l=e(a),l&&(l.c(),l.m(t.parentNode,t)))},d(a){l.d(a),a&&u(t)}}}function B(i){let t,n,e,l,a;return{c(){t=k("p"),n=h("ERROR: no valid pages found matching filters year="),e=h(i[0]),l=h(", keywords="),a=h(i[1])},l(r){t=g(r,"P",{});var o=p(t);n=m(o,"ERROR: no valid pages found matching filters year="),e=m(o,i[0]),l=m(o,", keywords="),a=m(o,i[1]),o.forEach(u)},m(r,o){y(r,t,o),_(t,n),_(t,e),_(t,l),_(t,a)},p(r,o){o&1&&O(e,r[0]),o&2&&O(a,r[1])},d(r){r&&u(t)}}}function D(i){let t,n=i[3],e=[];for(let l=0;l<n.length;l+=1)e[l]=A(z(i,n,l));return{c(){t=k("ul");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=g(l,"UL",{});var a=p(t);for(let r=0;r<e.length;r+=1)e[r].l(a);a.forEach(u)},m(l,a){y(l,t,a);for(let r=0;r<e.length;r+=1)e[r].m(t,null)},p(l,a){if(a&28){n=l[3];let r;for(r=0;r<n.length;r+=1){const o=z(l,n,r);e[r]?e[r].p(o,a):(e[r]=A(o),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=n.length}},d(l){l&&u(t),C(e,l)}}}function A(i){let t,n,e=i[4](i[10])+"",l,a,r;return{c(){t=k("li"),n=k("a"),l=h(e),r=G(),this.h()},l(o){t=g(o,"LI",{});var f=p(t);n=g(f,"A",{href:!0});var c=p(n);l=m(c,e),c.forEach(u),r=M(f),f.forEach(u),this.h()},h(){E(n,"href",a=i[2][i[10]].href)},m(o,f){y(o,t,f),_(t,n),_(n,l),_(t,r)},p(o,f){f&8&&e!==(e=o[4](o[10])+"")&&O(l,e),f&12&&a!==(a=o[2][o[10]].href)&&E(n,"href",a)},d(o){o&&u(t)}}}function H(i){let t,n;return{c(){t=k("p"),n=h("Generating list of puzzles...")},l(e){t=g(e,"P",{});var l=p(t);n=m(l,"Generating list of puzzles..."),l.forEach(u)},m(e,l){y(e,t,l),_(t,n)},p:d,d(e){e&&u(t)}}}function J(i){let t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:H,then:U,catch:T};return S(i[5](),n),{c(){t=F(),n.block.c()},l(e){t=F(),n.block.l(e)},m(e,l){y(e,t,l),n.block.m(e,n.anchor=l),n.mount=()=>t.parentNode,n.anchor=t},p(e,[l]){i=e,j(n,i,l)},i:d,o:d,d(e){e&&u(t),n.block.d(e),n.token=null,n=null}}}function Q(i,t,n){let e;q(i,N,s=>n(9,e=s));let{yearFilter:l=null}=t,{keywordsFilter:a=null}=t,{renderOnlyVisible:r=!0}=t,{dateAscending:o=!0}=t,{format:f="year day title"}=t,c=Object(),w;function L(s){if(f==="year day title")return`[${c[s].year} - day ${c[s].day}] ${c[s].title}`;if(f==="day title")return`[day ${c[s].day}] ${c[s].title}`;throw`Specified list entry format ${f} not recognised!`}async function R(){if(await K(),l!==null)n(2,c=e[l]);else for(const s in e)for(const b in e[s])n(2,c[s+b]=e[s][b],c);if(r)for(const s in c)c[s].visible||delete c[s];if(a!==null){let s=!1;for(const b in c)s=c[b].keywords.some(P=>a.includes(P)),s||delete c[b]}n(3,w=Object.keys(c)),o||n(3,w=w.reverse())}return i.$$set=s=>{"yearFilter"in s&&n(0,l=s.yearFilter),"keywordsFilter"in s&&n(1,a=s.keywordsFilter),"renderOnlyVisible"in s&&n(6,r=s.renderOnlyVisible),"dateAscending"in s&&n(7,o=s.dateAscending),"format"in s&&n(8,f=s.format)},[l,a,c,w,L,R,r,o,f]}class Y extends v{constructor(t){super(),V(this,t,Q,J,I,{yearFilter:0,keywordsFilter:1,renderOnlyVisible:6,dateAscending:7,format:8})}}export{Y as P};
