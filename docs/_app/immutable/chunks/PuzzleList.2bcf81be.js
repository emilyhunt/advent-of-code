import{s as P,n as d,c as V}from"./scheduler.fd3686c2.js";import{S as j,i as S,x as w,g as h,d as u,e as k,c as g,l as q,t as y,a as F,b,h as _,j as O,u as I,s as N,f as G,n as v}from"./index.a4ac66b3.js";import{h as M,u as T}from"./await_block.5bed495b.js";import{e as A}from"./each.e59479a4.js";import{m as U,i as B}from"./stores.8535f7e5.js";function E(i,t,n){const e=i.slice();return e[10]=t[n],e}function D(i){return{c:d,l:d,m:d,p:d,d}}function H(i){let t;function n(a,r){return a[3].length>0?K:J}let e=n(i),l=e(i);return{c(){l.c(),t=w()},l(a){l.l(a),t=w()},m(a,r){l.m(a,r),h(a,t,r)},p(a,r){e===(e=n(a))&&l?l.p(a,r):(l.d(1),l=e(a),l&&(l.c(),l.m(t.parentNode,t)))},d(a){a&&u(t),l.d(a)}}}function J(i){let t,n,e,l,a;return{c(){t=k("p"),n=y("ERROR: no valid pages found matching filters year="),e=y(i[0]),l=y(", keywords="),a=y(i[1])},l(r){t=g(r,"P",{});var o=F(t);n=b(o,"ERROR: no valid pages found matching filters year="),e=b(o,i[0]),l=b(o,", keywords="),a=b(o,i[1]),o.forEach(u)},m(r,o){h(r,t,o),_(t,n),_(t,e),_(t,l),_(t,a)},p(r,o){o&1&&O(e,r[0]),o&2&&O(a,r[1])},d(r){r&&u(t)}}}function K(i){let t,n=A(i[3]),e=[];for(let l=0;l<n.length;l+=1)e[l]=R(E(i,n,l));return{c(){t=k("ul");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=g(l,"UL",{});var a=F(t);for(let r=0;r<e.length;r+=1)e[r].l(a);a.forEach(u)},m(l,a){h(l,t,a);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null)},p(l,a){if(a&28){n=A(l[3]);let r;for(r=0;r<n.length;r+=1){const o=E(l,n,r);e[r]?e[r].p(o,a):(e[r]=R(o),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=n.length}},d(l){l&&u(t),I(e,l)}}}function R(i){let t,n,e=i[4](i[10])+"",l,a,r;return{c(){t=k("li"),n=k("a"),l=y(e),r=N(),this.h()},l(o){t=g(o,"LI",{});var f=F(t);n=g(f,"A",{href:!0});var c=F(n);l=b(c,e),c.forEach(u),r=G(f),f.forEach(u),this.h()},h(){v(n,"href",a=i[2][i[10]].href)},m(o,f){h(o,t,f),_(t,n),_(n,l),_(t,r)},p(o,f){f&8&&e!==(e=o[4](o[10])+"")&&O(l,e),f&12&&a!==(a=o[2][o[10]].href)&&v(n,"href",a)},d(o){o&&u(t)}}}function Q(i){let t,n="Generating list of puzzles...";return{c(){t=k("p"),t.textContent=n},l(e){t=g(e,"P",{"data-svelte-h":!0}),q(t)!=="svelte-cyqisy"&&(t.textContent=n)},m(e,l){h(e,t,l)},p:d,d(e){e&&u(t)}}}function W(i){let t,n={ctx:i,current:null,token:null,hasCatch:!1,pending:Q,then:H,catch:D};return M(i[5](),n),{c(){t=w(),n.block.c()},l(e){t=w(),n.block.l(e)},m(e,l){h(e,t,l),n.block.m(e,n.anchor=l),n.mount=()=>t.parentNode,n.anchor=t},p(e,[l]){i=e,T(n,i,l)},i:d,o:d,d(e){e&&u(t),n.block.d(e),n.token=null,n=null}}}function X(i,t,n){let e;V(i,U,s=>n(9,e=s));let{yearFilter:l=null}=t,{keywordsFilter:a=null}=t,{renderOnlyVisible:r=!0}=t,{dateAscending:o=!0}=t,{format:f="year day title"}=t,c=Object(),p;function C(s){if(f==="year day title")return`[${c[s].year} - day ${c[s].day}] ${c[s].title}`;if(f==="day title")return`[day ${c[s].day}] ${c[s].title}`;throw`Specified list entry format ${f} not recognised!`}async function L(){if(await B(),l!==null)n(2,c=e[l]);else for(const s in e)for(const m in e[s])n(2,c[s+m]=e[s][m],c);if(r)for(const s in c)c[s].visible||delete c[s];if(a!==null){let s=!1;for(const m in c)s=c[m].keywords.some(z=>a.includes(z)),s||delete c[m]}n(3,p=Object.keys(c)),o||n(3,p=p.reverse())}return i.$$set=s=>{"yearFilter"in s&&n(0,l=s.yearFilter),"keywordsFilter"in s&&n(1,a=s.keywordsFilter),"renderOnlyVisible"in s&&n(6,r=s.renderOnlyVisible),"dateAscending"in s&&n(7,o=s.dateAscending),"format"in s&&n(8,f=s.format)},[l,a,c,p,C,L,r,o,f]}class te extends j{constructor(t){super(),S(this,t,X,W,P,{yearFilter:0,keywordsFilter:1,renderOnlyVisible:6,dateAscending:7,format:8})}}export{te as P};
