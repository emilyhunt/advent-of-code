import{S as v,i as I,s as S,L as j,e as F,b as h,M as q,K as u,h as d,I as z,k,l as g,m as p,q as y,r as b,E as _,u as O,P as C,a as M,c as N,n as E}from"./index-69c26055.js";import{m as K,i as T}from"./stores-60211f3c.js";function A(i,e,l){const t=i.slice();return t[10]=e[l],t}function U(i){return{c:u,l:u,m:u,p:u,d:u}}function B(i){let e;function l(a,r){return a[3].length>0?G:D}let t=l(i),n=t(i);return{c(){n.c(),e=F()},l(a){n.l(a),e=F()},m(a,r){n.m(a,r),h(a,e,r)},p(a,r){t===(t=l(a))&&n?n.p(a,r):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&d(e)}}}function D(i){let e,l,t,n,a;return{c(){e=k("p"),l=y("ERROR: no valid pages found matching filters year="),t=y(i[0]),n=y(", keywords="),a=y(i[1])},l(r){e=g(r,"P",{});var o=p(e);l=b(o,"ERROR: no valid pages found matching filters year="),t=b(o,i[0]),n=b(o,", keywords="),a=b(o,i[1]),o.forEach(d)},m(r,o){h(r,e,o),_(e,l),_(e,t),_(e,n),_(e,a)},p(r,o){o&1&&O(t,r[0]),o&2&&O(a,r[1])},d(r){r&&d(e)}}}function G(i){let e,l=i[3],t=[];for(let n=0;n<l.length;n+=1)t[n]=L(A(i,l,n));return{c(){e=k("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=g(n,"UL",{});var a=p(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(d)},m(n,a){h(n,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(n,a){if(a&28){l=n[3];let r;for(r=0;r<l.length;r+=1){const o=A(n,l,r);t[r]?t[r].p(o,a):(t[r]=L(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(n){n&&d(e),C(t,n)}}}function L(i){let e,l,t=i[4](i[10])+"",n,a,r;return{c(){e=k("li"),l=k("a"),n=y(t),r=M(),this.h()},l(o){e=g(o,"LI",{});var f=p(e);l=g(f,"A",{href:!0});var s=p(l);n=b(s,t),s.forEach(d),r=N(f),f.forEach(d),this.h()},h(){E(l,"href",a=i[2][i[10]].href)},m(o,f){h(o,e,f),_(e,l),_(l,n),_(e,r)},p(o,f){f&8&&t!==(t=o[4](o[10])+"")&&O(n,t),f&12&&a!==(a=o[2][o[10]].href)&&E(l,"href",a)},d(o){o&&d(e)}}}function H(i){let e;return{c(){e=k("p")},l(l){e=g(l,"P",{}),p(e).forEach(d)},m(l,t){h(l,e,t)},p:u,d(l){l&&d(e)}}}function J(i){let e,l={ctx:i,current:null,token:null,hasCatch:!1,pending:H,then:B,catch:U};return j(i[5](),l),{c(){e=F(),l.block.c()},l(t){e=F(),l.block.l(t)},m(t,n){h(t,e,n),l.block.m(t,l.anchor=n),l.mount=()=>e.parentNode,l.anchor=e},p(t,[n]){i=t,q(l,i,n)},i:u,o:u,d(t){t&&d(e),l.block.d(t),l.token=null,l=null}}}function Q(i,e,l){let t;z(i,K,c=>l(9,t=c));let{yearFilter:n=null}=e,{keywordsFilter:a=null}=e,{renderOnlyVisible:r=!0}=e,{dateAscending:o=!0}=e,{format:f="year day title"}=e,s=Object(),w;function R(c){if(f==="year day title")return`[${s[c].year} - day ${s[c].day}] ${s[c].title}`;if(f==="day title")return`[day ${s[c].day}] ${s[c].title}`;throw`Specified list entry format ${f} not recognised!`}async function P(){if(await T(),n!==null)l(2,s=t[n]);else for(const c in t)for(const m in t[c])l(2,s[c+m]=t[c][m],s);if(r)for(const c in s)s[c].visible||delete s[c];if(a!==null){let c=!1;for(const m in s)c=s[m].keywords.some(V=>a.includes(V)),c||delete s[m]}l(3,w=Object.keys(s)),o||l(3,w=w.reverse())}return i.$$set=c=>{"yearFilter"in c&&l(0,n=c.yearFilter),"keywordsFilter"in c&&l(1,a=c.keywordsFilter),"renderOnlyVisible"in c&&l(6,r=c.renderOnlyVisible),"dateAscending"in c&&l(7,o=c.dateAscending),"format"in c&&l(8,f=c.format)},[n,a,s,w,R,P,r,o,f]}class Y extends v{constructor(e){super(),I(this,e,Q,J,S,{yearFilter:0,keywordsFilter:1,renderOnlyVisible:6,dateAscending:7,format:8})}}export{Y as P};
